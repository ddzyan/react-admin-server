(window["webpackJsonpreact-admin"]=window["webpackJsonpreact-admin"]||[]).push([[0],{1184:function(e,t,a){},1188:function(e,t,a){},1191:function(e,t,a){},1192:function(e,t,a){},1193:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),o=a.n(c),s=a(60),i=a(16),l=a(17),u=a(19),p=a(18),m=a(20),d=a(99),f=a(122),h=(a(63),a(28)),g=(a(101),a(43)),b=(a(125),a(5)),y=(a(91),a(23)),v=(a(126),a(39)),E=a(14),O=a.n(E),j=a(30),k=a(195),w=a(501),x=a.n(w),C=a(502),S=a.n(C),N=null,_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((function(n,r){N||(N=S.a.create({timeout:1e3,auth:null})),("GET"===a?N.get(e,{params:t}):N.post(e,t)).then((function(e){n(e.data)})).catch((function(e){y.a.error(e.message)}))}))};function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var P=function(){var e=Object(j.a)(O.a.mark((function e(t,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_("/login",{username:t,password:a},"POST"));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),I=function(e,t){return _("/manage/category/add",{categoryName:e,parentId:t},"POST")},F=function(e,t){return _("/manage/category/update",{categoryName:e,categoryId:t},"POST")},M=function(e){return _("/manage/category/list",{parentId:e},"GET")},A=function(){var e=Object(j.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_("/manage/category/info",{categoryId:t},"GET"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(j.a)(O.a.mark((function e(t,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_("/manage/product/updateStatus",{productId:t,status:a},"POST"));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),D=function(e,t){return _("/manage/product/list",{pageNum:e,pageSize:t},"GET")},V=function(e,t,a,n){return _("/manage/product/search",Object(k.a)({pageNum:e,pageSize:t},n,a),"GET")},L=function(e){return _("/manage/product/delete",{_id:e},"POST")},R=function(e){return _("/manage/img/delete",{name:e},"POST")},W=function(e){var t=e._id,a=e.categoryId,n=e.pCategoryId,r=e.name,c=e.desc,o=e.price,s=e.detail,i=e.imgs;return _("/manage/product/".concat(t?"update":"add"),{_id:t,categoryId:a,pCategoryId:n,name:r,desc:c,price:o,detail:s,imgs:i},"POST")},K=function(){return _("/manage/role/list",{},"GET")},B=function(e){return _("/manage/role/add",{roleName:e},"POST")},q=function(e){var t=e._id,a=e.menus,n=e.auth_time,r=e.auth_name;return _("/manage/role/update",{_id:t,menus:a,auth_time:n,auth_name:r},"POST")},z=function(){return _("/manage/user/list",{},"GET")},H=function(e){return _("/manage/user/".concat(e._id?"update":"add"),function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(a,!0).forEach((function(t){Object(k.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e),"POST")},G=function(e){return _("/manage/user/delete",{userId:e},"POST")},J=function(e){return new Promise((function(t,a){var n="http://api.map.baidu.com/telematics/v3/weather?location=".concat(e,"&output=json&ak=3p49MVra6urFRGOT9s8UBWr2");x()(n,{},(function(e,a){if(e||0!==a.error)y.a.error("\u83b7\u53d6\u5929\u6c14\u4fe1\u606f\u5931\u8d25");else{var n=a.results[0].weather_data[0],r=n.dayPictureUrl,c=n.weather;t({dayPictureUrl:r,weather:c})}}))}))},Q=a(597),$=function(e){Q.set("user-key",e)},X=function(){return Q.get("user-key")||{}},Y=function(){Q.remove("user-key")},Z=function(e){return{type:"set_head_title",headTitle:e}},ee=function(e){return{type:"reciver_user",user:e}},te=function(){return Y(),{type:"reset_user"}},ae=a(244),ne=a.n(ae),re=(a(608),v.a.Item),ce=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){if(e)y.a.error("\u9a8c\u8bc1\u5931\u8d25");else{var n=t.username,r=t.password;a.props.userLogin(n,r)}}))},a.validator=function(e,t,a){t?t.length>12?a("\u5bc6\u7801\u4e0d\u80fd\u5927\u4e8e12\u4f4d"):t.length<4?a("\u5bc6\u7801\u4e0d\u80fd\u5c0f\u4e8e4\u4f4d"):/^[a-zA-Z0-9_]+$/.test(t)?a():a("\u5bc6\u7801\u53ea\u80fd\u4e3a\u5bc6\u7801\u6570\u5b57\u4e0b\u5212\u7ebf\u7ec4\u6210"):a("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a")},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.user;if(e&&e._id)return r.a.createElement(f.a,{to:"/home"});var t=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"login"},r.a.createElement("header",{className:"login-title"},r.a.createElement("img",{src:ne.a,alt:"logo"}),r.a.createElement("h1",null,"React \u540e\u53f0\u767b\u9646\u7cfb\u7edf")),r.a.createElement("section",{className:"login-content"},r.a.createElement("div",{className:e.errorMessage?"error-msg show":"error-msg"},e.errorMessage),r.a.createElement("h2",null,"\u767b\u5f55"),r.a.createElement(v.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(re,null,t("username",{rules:[{required:!0,whitespace:!0,message:"\u7528\u6237\u540d\u5fc5\u987b\u8f93\u5165"},{min:4,message:"\u7528\u6237\u540d\u4e0d\u80fd\u5c0f\u4e8e4\u4f4d\u6570"},{max:12,message:"\u7528\u6237\u540d\u4e0d\u80fd\u5927\u4e8e12\u4f4d\u6570"}]})(r.a.createElement(g.a,{prefix:r.a.createElement(b.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u7528\u6237\u540d"}))),r.a.createElement(re,null,t("password",{rules:[{validator:this.validator}]})(r.a.createElement(g.a,{prefix:r.a.createElement(b.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u5bc6\u7801"}))),r.a.createElement(re,null,r.a.createElement(h.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u767b\u9646")))))}}]),t}(n.Component),oe=v.a.create()(ce),se=Object(s.b)((function(e){return{user:e.user}}),{userLogin:function(e,t){return function(){var a=Object(j.a)(O.a.mark((function a(n){var r,c;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,P(e,t);case 2:(r=a.sent)&&0===r.status?(c=r.data,$(c),n(ee(c))):n({type:"show_msg",errorMessage:r.msg});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})(oe),ie=(a(685),a(171)),le=(a(687),a(688),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"home"},"\u6b22\u8fce\u4f7f\u7528 react \u540e\u53f0")}}]),t}(n.Component)),ue=(a(106),a(47)),pe=(a(238),a(119)),me=(a(177),a(78));a(700),a(701);function de(e){return r.a.createElement("button",Object.assign({},e,{className:"linkButton"}))}a(213);var fe=a(67),he=v.a.Item,ge=fe.a.Option,be=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.setForm(this.props.form)}},{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.categorys,n=e.parentId;return r.a.createElement(v.a,null,r.a.createElement(he,null,t("parentId",{initialValue:n})(r.a.createElement(fe.a,null,r.a.createElement(ge,{value:"0"},"\u4e00\u7ea7\u5206\u7c7b\u5217\u8868"),a.map((function(e,t){return r.a.createElement(ge,{key:t,value:e._id},e.name)}))))),r.a.createElement(he,null,t("categoryName",{initialValue:"",rules:[{required:!0,message:"\u5206\u7c7b\u540d\u79f0\u5fc5\u987b\u8f93\u5165"},{max:10,message:"\u5206\u7c7b\u540d\u79f0\u9700\u8981\u5c0f\u4e8e10\u4f4d"},{pattern:/^[\u4e00-\u9fa5]+$/,message:"\u5206\u7c7b\u540d\u79f0\u53ea\u80fd\u662f\u4e2d\u6587"}]})(r.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"}))))}}]),t}(n.Component),ye=v.a.create()(be),ve=v.a.Item,Ee=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.setForm(this.props.form)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props.categoryName,t=this.props.form.getFieldDecorator;return r.a.createElement(v.a,null,r.a.createElement(ve,null,t("categoryName",{initialValue:e,rules:[{required:!0,message:"\u5206\u7c7b\u540d\u79f0\u5fc5\u987b\u8f93\u5165"},{max:12,message:"\u5206\u7c7b\u540d\u79f0\u9700\u8981\u5c0f\u4e8e12\u4f4d"},{pattern:/^[\u4e00-\u9fa5]+$/,message:"\u5206\u7c7b\u540d\u79f0\u5fc5\u987b\u662f\u4e2d\u6587"}]})(r.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"}))))}}]),t}(n.Component),Oe=v.a.create()(Ee),je=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).state={loading:!0,selectCategory:{},categorys:[],subCategorys:[],parentId:"0",parentName:"",modalVisible:0},a.showSubCategorys=function(e){var t=e._id,n=e.name;a.setState({parentId:t,parentName:n},(function(){a.getCategorys()}))},a.initColumns=function(){a.columns=[{title:"\u5206\u7c7b\u540d\u79f0",dataIndex:"name"},{title:"\u64cd\u4f5c",width:300,render:function(e){return r.a.createElement("span",null,r.a.createElement(de,{onClick:function(){return a.showUpdateModal(e)}},"\u4fee\u6539\u5206\u7c7b"),"0"===a.state.parentId?r.a.createElement(de,{onClick:function(){return a.showSubCategorys(e)}},"\u67e5\u770b\u5b50\u5206\u7c7b"):"")}}]},a.getCategorys=function(){var e=Object(j.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t||a.state.parentId,e.next=3,M(t);case 3:(n=e.sent)&&0===n.status?(r=n.data,Object.is(t,"0")?a.setState({loading:!1,categorys:r}):a.setState({loading:!1,subCategorys:r})):y.a.error("\u83b7\u53d6\u5206\u7c7b\u5217\u8868\u5931\u8d25");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.showUpdateModal=function(e){a.selectCategory=e,a.setState({modalVisible:2})},a.showAddModal=function(){a.setState({modalVisible:1})},a.showCategorys=function(){a.setState({subCategorys:[],parentId:"0",parentName:""})},a.closeModal=function(){a.form.resetFields(),a.setState({modalVisible:0})},a.addCategory=function(){a.form.validateFields(function(){var e=Object(j.a)(O.a.mark((function e(t,n){var r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=10;break}return r=n.parentId,c=n.categoryName,a.closeModal(),e.next=5,I(c,r);case 5:0===e.sent.status?(a.state.parentId===r?a.getCategorys():"0"===r&&a.getCategorys(0),y.a.success("\u6dfb\u52a0\u6210\u529f")):y.a.success("\u6dfb\u52a0\u5931\u8d25"),e.next=11;break;case 10:y.a.error("\u9a8c\u8bc1\u5931\u8d25");case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},a.updateCategory=function(){a.form.validateFields(function(){var e=Object(j.a)(O.a.mark((function e(t,n){var r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=9;break}return r=n.categoryName,a.closeModal(),e.next=5,F(r,a.selectCategory._id);case 5:(c=e.sent)&&0===c.status?(a.getCategorys(),y.a.success("\u4fee\u6539\u6210\u529f")):y.a.error("\u9a8c\u8bc1\u5931\u8d25"),e.next=10;break;case 9:y.a.error("\u9a8c\u8bc1\u5931\u8d25");case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getCategorys()}},{key:"UNSAFE_componentWillMount",value:function(){this.initColumns()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.categorys,c=t.parentId,o=t.parentName,s=t.subCategorys,i=this.selectCategory?this.selectCategory:{},l="0"===c?"\u4e00\u7ea7\u5206\u7c7b\u5217\u8868":r.a.createElement("span",null,r.a.createElement(de,{onClick:this.showCategorys},"\u4e00\u7ea7\u5206\u7c7b\u83dc\u5355"),r.a.createElement(b.a,{type:"arrow-right",style:{marginRight:"5px"}}),r.a.createElement("span",null,o)),u=r.a.createElement(h.a,{type:"primary",onClick:function(){return e.showAddModal()}},r.a.createElement(b.a,{type:"plus"}),"\u6dfb\u52a0");return r.a.createElement("div",{className:"category"},r.a.createElement(me.a,{title:"\u6dfb\u52a0\u5206\u7c7b",cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",visible:1===this.state.modalVisible,onOk:this.addCategory,onCancel:function(){return e.closeModal()}},r.a.createElement(ye,{parentId:c,categorys:n,setForm:function(t){e.form=t}})),r.a.createElement(me.a,{title:"\u66f4\u65b0\u5206\u7c7b",cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",visible:2===this.state.modalVisible,onOk:this.updateCategory,onCancel:function(){return e.closeModal()}},r.a.createElement(Oe,{setForm:function(t){e.form=t},categoryName:i.name})),r.a.createElement(ue.a,{title:l,className:"category-card",extra:u},r.a.createElement(pe.a,{bordered:!0,pagination:{defaultPageSize:5,showQuickJumper:!0},loading:a,columns:this.columns,dataSource:"0"===c?n:s,rowKey:"_id"})))}}]),t}(n.Component),ke=a(144),we=a.n(ke),xe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={sales:[120,200,150,80,70,110,130],stores:[110,150,100,180,170,130,160]},a.getOption=function(e,t){return{title:{text:"ECharts \u5165\u95e8\u793a\u4f8b"},tooltip:{},legend:{data:["\u9500\u91cf","\u5e93\u5b58"]},xAxis:{type:"category",data:["\u6bdb\u8863","\u88e4\u5b50","\u7403\u8863","\u978b\u5b50","\u889c\u5b50","\u5185\u8863","\u889c\u5b50"]},yAxis:{type:"value"},series:[{name:"\u9500\u91cf",data:e,type:"bar"},{name:"\u5e93\u5b58",data:t,type:"bar"}]}},a.update=function(){a.setState((function(e){var t=e.sales,a=e.stores;return{sales:t.map((function(e){return e+1})),stores:a.map((function(e){return e+10}))}}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.stores,a=e.sales;return r.a.createElement("div",null,r.a.createElement(ue.a,null,r.a.createElement(h.a,{type:"primary",onClick:this.update},"\u66f4\u65b0")),r.a.createElement(ue.a,{title:"\u67f1\u5f62\u56fe\u4e00"},r.a.createElement(we.a,{option:this.getOption(a,t)})))}}]),t}(n.Component),Ce=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={sales:[120,200,150,80,70,110,130],stores:[110,150,100,180,170,130,160]},a.getOption=function(e,t){return{title:{text:"ECharts \u5165\u95e8\u793a\u4f8b"},tooltip:{},legend:{data:["\u9500\u91cf","\u5e93\u5b58"]},xAxis:{type:"category",data:["\u6bdb\u8863","\u88e4\u5b50","\u7403\u8863","\u978b\u5b50","\u889c\u5b50","\u5185\u8863","\u889c\u5b50"]},yAxis:{type:"value"},series:[{name:"\u9500\u91cf",data:e,type:"line"},{name:"\u5e93\u5b58",data:t,type:"line"}]}},a.update=function(){a.setState((function(e){var t=e.sales,a=e.stores;return{sales:t.map((function(e){return e+1})),stores:a.map((function(e){return e+10}))}}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.stores,a=e.sales;return r.a.createElement("div",null,r.a.createElement(ue.a,null,r.a.createElement(h.a,{type:"primary",onClick:this.update},"\u66f4\u65b0")),r.a.createElement(ue.a,{title:"\u7ebf\u56fe\u4e00"},r.a.createElement(we.a,{option:this.getOption(a,t)})))}}]),t}(n.Component),Se=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={sales:[120,200,150,80,70,110,130],stores:[110,150,100,180,170,130,160]},a.getOption=function(){return{title:{text:"\u67d0\u7ad9\u70b9\u7528\u6237\u8bbf\u95ee\u6765\u6e90",subtext:"\u7eaf\u5c5e\u865a\u6784",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["\u76f4\u63a5\u8bbf\u95ee","\u90ae\u4ef6\u8425\u9500","\u8054\u76df\u5e7f\u544a","\u89c6\u9891\u5e7f\u544a","\u641c\u7d22\u5f15\u64ce"]},series:[{name:"\u8bbf\u95ee\u6765\u6e90",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:335,name:"\u76f4\u63a5\u8bbf\u95ee"},{value:310,name:"\u90ae\u4ef6\u8425\u9500"},{value:234,name:"\u8054\u76df\u5e7f\u544a"},{value:135,name:"\u89c6\u9891\u5e7f\u544a"},{value:1548,name:"\u641c\u7d22\u5f15\u64ce"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},a.getOption2=function(){return{backgroundColor:"#2c343c",title:{text:"Customized Pie",left:"center",top:20,textStyle:{color:"#ccc"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},visualMap:{show:!1,min:80,max:600,inRange:{colorLightness:[0,1]}},series:[{name:"\u8bbf\u95ee\u6765\u6e90",type:"pie",radius:"55%",center:["50%","50%"],data:[{value:335,name:"\u76f4\u63a5\u8bbf\u95ee"},{value:310,name:"\u90ae\u4ef6\u8425\u9500"},{value:274,name:"\u8054\u76df\u5e7f\u544a"},{value:235,name:"\u89c6\u9891\u5e7f\u544a"},{value:400,name:"\u641c\u7d22\u5f15\u64ce"}].sort((function(e,t){return e.value-t.value})),roseType:"radius",label:{normal:{textStyle:{color:"rgba(255, 255, 255, 0.3)"}}},labelLine:{normal:{lineStyle:{color:"rgba(255, 255, 255, 0.3)"},smooth:.2,length:10,length2:20}},itemStyle:{normal:{color:"#c23531",shadowBlur:200,shadowColor:"rgba(0, 0, 0, 0.5)"}},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.stores,a=e.sales;return r.a.createElement("div",null,r.a.createElement(ue.a,{title:"\u997c\u56fe\u4e00"},r.a.createElement(we.a,{option:this.getOption(a,t)})),r.a.createElement(ue.a,{title:"\u997c\u56fe\u4e8c"},r.a.createElement(we.a,{option:this.getOption2(a,t)})))}}]),t}(n.Component),Ne=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Order")}}]),t}(n.Component),_e=(a(1050),a(521)),Te=a(197),Pe=a(241),Ie=(a(1195),a(520)),Fe=5,Me="http://localhost:5000/upload/";function Ae(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}var Ue=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleCancel=function(){return a.setState({previewVisible:!1})},a.handlePreview=function(){var e=Object(j.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,Ae(t.originFileObj);case 3:t.preview=e.sent;case 4:a.setState({previewImage:t.url||t.preview,previewVisible:!0});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(){var e=Object(j.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.file,r=t.fileList,t.event,a.setState({fileList:r}),"done"!==n.status){e.next=8;break}(n=r[r.length-1]).name=r[r.length-1].response.data.name,y.a.success("\u4e0a\u4f20\u6210\u529f"),e.next=13;break;case 8:if("removed"!==n.status){e.next=13;break}return e.next=11,R(n.name);case 11:0===e.sent.status?y.a.success("\u5220\u9664\u6210\u529f"):y.a.error("\u5220\u9664\u5931\u8d25");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getFileList=function(){return a.state.fileList.map((function(e){return e.name}))};var n=a.props.imgs,r=[];return n&&n.length>0&&n.forEach((function(e,t){r.push({uid:-t,name:e,status:"done",url:"".concat(Me).concat(e)})})),a.state={previewVisible:!1,previewImage:"",fileList:r},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.previewVisible,a=e.previewImage,n=e.fileList,c=r.a.createElement("div",null,r.a.createElement(b.a,{type:"plus"}),r.a.createElement("div",null,"Upload"));return r.a.createElement("div",null,r.a.createElement(Ie.a,{action:"/manage/img/upload",listType:"picture-card",name:"image",fileList:n,accept:"image/*",onPreview:this.handlePreview,onChange:this.handleChange},n.length>=3?null:c),r.a.createElement(me.a,{visible:t,footer:null,onCancel:this.handleCancel},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:a})))}}]),t}(r.a.Component),De=a(145),Ve=a(513),Le=a(514),Re=a.n(Le),We=a(515),Ke=a.n(We),Be=(a(1181),function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).onEditorStateChange=function(e){a.setState({editorState:e})},a.getDetail=function(){var e=a.state.editorState;return Re()(Object(De.convertToRaw)(e.getCurrentContent()))},a.uploadImageCallBack=function(e){return new Promise((function(t,a){var n=new XMLHttpRequest;n.open("POST","/manage/img/upload");var r=new FormData;r.append("image",e),n.send(r),n.addEventListener("load",(function(){var e=JSON.parse(n.responseText);console.log("response :",e),0===e.status?(y.a.success("\u4e0a\u4f20\u6210\u529f"),t({data:{link:e.data.url}})):(y.a.error("\u4e0a\u4f20\u5931\u8d25"),a(e.data.msg))})),n.addEventListener("error",(function(){var e=JSON.parse(n.responseText);a(e)}))}))};var n=a.props.detail;if(n){var r=Ke()(n);if(r){var c=De.ContentState.createFromBlockArray(r.contentBlocks),o=De.EditorState.createWithContent(c);a.state={editorState:o}}}else a.state={editorState:De.EditorState.createEmpty()};return a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.editorState;return r.a.createElement(Ve.Editor,{editorState:e,wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",onEditorStateChange:this.onEditorStateChange,editorStyle:{minHeight:200,border:"1px solid black",paddingLeft:10},toolbar:{image:{uploadCallback:this.uploadImageCallBack,alt:{present:!0,mandatory:!0}}}})}}]),t}(n.Component)),qe=v.a.Item,ze=g.a.TextArea,He=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={options:[]},a.initOptions=function(){var e=Object(j.a)(O.a.mark((function e(t){var n,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(Pe.a)(a),r=n.product.pCategoryId,!n.isUpdate||"0"===r){e.next=7;break}return e.next=4,a.getCategory(r);case 4:c=e.sent,t.find((function(e){return e.value===r})).children=c;case 7:a.setState({options:t});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getCategory=Object(j.a)(O.a.mark((function e(){var t,n,r,c=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:0,e.next=3,M(t);case 3:if(!(n=e.sent)||0!==n.status){e.next=13;break}if(r=n.data.map((function(e){var a=e.name;return{value:e._id,label:a,isLeaf:0!==t}})),0!==t){e.next=10;break}a.initOptions(r),e.next=11;break;case 10:return e.abrupt("return",r);case 11:e.next=14;break;case 13:y.a.error("\u83b7\u53d6\u5206\u7c7b\u5217\u8868\u5931\u8d25");case 14:case"end":return e.stop()}}),e)}))),a.loadData=function(){var e=Object(j.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t[0]).loading=!0,e.next=4,a.getCategory(n.value);case 4:r=e.sent,n.loading=!1,r&&r.length>0?n.children=r:n.isLeaf=!0,a.setState({options:Object(Te.a)(a.state.options)});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.submit=function(){a.props.form.validateFields(function(){var e=Object(j.a)(O.a.mark((function e(t,n){var r,c,o,s,i,l,u,p,m,d,f;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=15;break}return r=a.pw.current,c=a.editor.current,o=n.categorys,s=n.name,i=n.desc,l=n.price,2===o.length?(u=o[1],p=o[0]):p=o[0],m=r.getFileList(),d=c.getDetail(),f={categoryId:u,pCategoryId:p,name:s,desc:i,price:l,imgs:m,detail:d},a.isUpdate&&(f._id=a.product._id),e.next=11,W(f);case 11:0===e.sent.status?(y.a.success("".concat(a.isUpdate?"\u66f4\u65b0":"\u6dfb\u52a0","\u5546\u54c1\u6210\u529f")),a.props.history.goBack()):y.a.success("".concat(a.isUpdate?"\u66f4\u65b0":"\u6dfb\u52a0","\u5546\u54c1\u5931\u8d25")),e.next=16;break;case 15:y.a.error("\u9a8c\u8bc1\u5931\u8d25");case 16:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},a.validatePrice=function(e,t,a){Number.parseInt(t)>0?a():a("\u5546\u54c1\u4ef7\u683c\u5fc5\u987b\u5927\u4e8e0")},a.pw=r.a.createRef(),a.editor=r.a.createRef(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getCategory()}},{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.location.state;this.isUpdate=!!e,this.product=e||{}}},{key:"render",value:function(){var e=this;console.log("add-update render");var t=this.props.form.getFieldDecorator,a=this.product,n=this.isUpdate,c=a.pCategoryId,o=a.categoryId,s=a.name,i=a.desc,l=a.price,u=a.imgs,p=a.detail,m=[];n&&("0"!==c?(m.push(c),m.push(o)):m.push(o));var d=r.a.createElement("span",null,r.a.createElement(de,{onClick:function(){e.props.history.goBack()}},r.a.createElement(b.a,{type:"arrow-left",style:{fontSize:15}})),r.a.createElement("span",{style:{fontSize:15}},"\u6dfb\u52a0\u5546\u54c1"));return r.a.createElement(ue.a,{title:d},r.a.createElement(v.a,{labelCol:{span:2},wrapperCol:{span:8}},r.a.createElement(qe,{label:"\u5546\u54c1\u540d\u79f0:"},t("name",{initialValue:s,rules:[{required:!0,message:"\u5546\u54c1\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}]})(r.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0"}))),r.a.createElement(qe,{label:"\u5546\u54c1\u63cf\u8ff0:"},t("desc",{initialValue:i,rules:[{required:!0,message:"\u5546\u54c1\u63cf\u8ff0\u4e0d\u80fd\u4e3a\u7a7a"}]})(r.a.createElement(ze,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u63cf\u8ff0",autosize:{maxRows:6,minRows:2}}))),r.a.createElement(qe,{label:"\u5546\u54c1\u4ef7\u683c:"},t("price",{initialValue:l,rules:[{required:!0,message:"\u5546\u54c1\u4ef7\u683c\u4e0d\u80fd\u4e3a\u7a7a"},{validator:this.validatePrice}]})(r.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u4ef7\u683c",type:"number",addonAfter:"\u5143"}))),r.a.createElement(qe,{label:"\u5546\u54c1\u7c7b\u522b"},t("categorys",{initialValue:m,rules:[{required:!0,message:"\u5546\u54c1\u7c7b\u522b\u4e0d\u80fd\u4e3a\u7a7a"}]})(r.a.createElement(_e.a,{placeholder:"\u8bf7\u9009\u62e9\u5546\u54c1\u5206\u7c7b",options:this.state.options,loadData:this.loadData}))),r.a.createElement(qe,{label:"\u56fe\u7247\u4e0a\u4f20"},r.a.createElement(Ue,{imgs:u,ref:this.pw})),r.a.createElement(qe,{label:"\u5546\u54c1\u8be6\u60c5",labelCol:{span:2},wrapperCol:{span:20}},r.a.createElement(Be,{detail:p,ref:this.editor})),r.a.createElement(h.a,{type:"primary",onClick:this.submit},"\u63d0\u4ea4")))}}]),t}(n.Component),Ge=v.a.create()(He),Je=(a(1182),a(338)),Qe=Je.a.Item,$e=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={categoryName:"",subCategoryName:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(j.a)(O.a.mark((function e(){var t,a,n,c,o,s,i,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.location.state){e.next=2;break}return e.abrupt("return",r.a.createElement(f.a,{to:"/product"}));case 2:if(t=this.props.location.state,a=t.categoryId,"0"!==(n=t.pCategoryId)){e.next=11;break}return e.next=6,A(a);case 6:c=e.sent,o=c.data.name,this.setState({categoryName:o}),e.next=17;break;case 11:return e.next=13,Promise.all([A(a),A(n)]);case 13:s=e.sent,i=s[0].data.name,l=s[1].data.name,this.setState({categoryName:i,subCategoryName:l});case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(!this.props.location.state)return r.a.createElement(f.a,{to:"/product"});var t=this.props.location.state,a=t.name,n=t.desc,c=t.detail,o=t.imgs,s=t.price,i=this.state,l=i.categoryName,u=i.subCategoryName,p=r.a.createElement("span",null,r.a.createElement(h.a,{type:"primary",onClick:function(){return e.props.history.goBack()}},r.a.createElement(b.a,{type:"arrow-left"}),"\u540e\u9000"));return r.a.createElement(ue.a,{title:p,className:"product-detail"},r.a.createElement(Je.a,null,r.a.createElement(Qe,null,r.a.createElement("span",{className:"title"},"\u5546\u54c1\u540d\u79f0:"),r.a.createElement("span",null,a)),r.a.createElement(Qe,null,r.a.createElement("span",{className:"title"},"\u5546\u54c1\u63cf\u8ff0:"),r.a.createElement("span",null,n)),r.a.createElement(Qe,null,r.a.createElement("span",{className:"title"},"\u5546\u54c1\u4ef7\u683c:"),r.a.createElement("span",null,s)),r.a.createElement(Qe,null,r.a.createElement("span",{className:"title"},"\u6240\u5c5e\u5206\u7c7b:"),r.a.createElement("span",null,l," ",u?"--\x3e"+u:"")),r.a.createElement(Qe,null,r.a.createElement("span",{className:"title"},"\u6240\u5c5e\u56fe\u7247:"),o.map((function(e,t){return r.a.createElement("img",{key:t,src:"".concat(Me).concat(e),alt:"1"})}))),r.a.createElement(Qe,null,r.a.createElement("span",{className:"title"},"\u6240\u5c5e\u5206\u7c7b:"),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:c}}))))}}]),t}(n.Component),Xe=fe.a.Option,Ye=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).state={loading:!0,total:0,products:[],searchType:"productDesc",searchValue:""},a.updateProductStatus=function(){var e=Object(j.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t._id,1===t.status?0:1);case 2:(n=e.sent)&&0===n.status?(y.a.success("\u66f4\u65b0\u6210\u529f"),a.getProducts(a.pageNum)):y.a.error("\u66f4\u65b0\u5931\u8d25");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.initColumns=function(){a.columns=[{title:"\u5546\u54c1\u540d\u79f0",dataIndex:"name"},{title:"\u5546\u54c1\u63cf\u8ff0",dataIndex:"desc"},{title:"\u4ef7\u683c",dataIndex:"price",render:function(e){return"\xa5".concat(e)}},{title:"\u72b6\u6001",width:100,render:function(e){return r.a.createElement("span",null,r.a.createElement(h.a,{type:"primary",onClick:function(){a.updateProductStatus(e)}},1===e.status?"\u4e0b\u67b6":"\u4e0a\u67b6"),r.a.createElement("span",null,1===e.status?"\u5728\u552e":"\u5df2\u4e0b\u67b6"))}},{width:100,title:"\u64cd\u4f5c",render:function(e){return r.a.createElement("div",null,r.a.createElement(de,{onClick:function(){return a.props.history.push("/product/detail",e)}},"\u8be6\u60c5"),r.a.createElement(de,{onClick:function(){return a.props.history.push("/product/update",e)}},"\u4fee\u6539"),r.a.createElement(de,{onClick:function(){return a.delProduct(e._id)}},"\u5220\u9664"))}}]},a.delProduct=function(){var e=Object(j.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:0===e.sent.status?(y.a.success("\u5220\u9664\u6210\u529f"),a.getProducts(1)):y.a.error("\u5220\u9664\u5931\u8d25");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getProducts=function(){var e=Object(j.a)(O.a.mark((function e(t){var n,r,c,o,s,i,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({loading:!0}),a.pageNum=t,n=a.state,r=n.searchType,!((c=n.searchValue).length>0)){e.next=9;break}return e.next=6,V(a.pageNum,Fe,c,r);case 6:o=e.sent,e.next=12;break;case 9:return e.next=11,D(a.pageNum,Fe);case 11:o=e.sent;case 12:o&&0===o.status?(s=o.data,i=s.list,l=s.total,a.setState({loading:!1,products:i,total:l})):y.a.error("\u83b7\u53d6\u5546\u54c1\u5217\u8868\u5931\u8d25");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getProducts(1)}},{key:"UNSAFE_componentWillMount",value:function(){this.initColumns()}},{key:"render",value:function(){var e=this,t=this.state,a=t.total,n=t.products,c=t.loading,o=t.searchType,s=r.a.createElement("div",null,r.a.createElement(fe.a,{defaultValue:o,style:{width:150},onChange:function(t){e.setState({searchType:t})}},r.a.createElement(Xe,{value:"productDesc"},"\u6309\u7167\u63cf\u8ff0\u641c\u7d22"),r.a.createElement(Xe,{value:"productName"},"\u6309\u7167\u540d\u79f0\u641c\u7d22")),r.a.createElement(g.a,{style:{width:150,margin:10},placeholder:"\u67e5\u8be2\u5185\u5bb9",onChange:function(t){var a=t.target.value;return e.setState({searchValue:a.trim()})}}),r.a.createElement(h.a,{type:"primary",onClick:function(){e.getProducts(1)}},"\u67e5\u8be2")),i=r.a.createElement(h.a,{type:"primary",onClick:function(){return e.props.history.push("/product/add")}},r.a.createElement(b.a,{type:"plus"}),"\u6dfb\u52a0");return r.a.createElement(ue.a,{title:s,extra:i},r.a.createElement(pe.a,{loading:c,bordered:!0,rowKey:"_id",dataSource:n,columns:this.columns,pagination:{current:this.pageNum,defaultPageSize:Fe,total:a,onChange:this.getProducts,showQuickJumper:!0}}))}}]),t}(n.Component),Ze=(a(1184),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/product",component:Ye,exact:!0}),r.a.createElement(f.b,{path:"/product/add",component:Ge}),r.a.createElement(f.b,{path:"/product/update",component:Ge}),r.a.createElement(f.b,{path:"/product/detail",component:$e}),r.a.createElement(f.a,{to:"/product"}))}}]),t}(n.Component));function et(e){if(!e)return"";var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}var tt=v.a.Item,at=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.setForm(this.props.form)}},{key:"render",value:function(){console.log("add-form render()");var e=this.props.form.getFieldDecorator;return r.a.createElement(v.a,{labelCol:{span:4},wrapperCol:{span:10}},r.a.createElement(tt,{label:"\u89d2\u8272\u540d\u79f0:"},e("name",{rules:[{required:!0,message:"\u7528\u6237\u540d\u79f0\u5fc5\u987b\u8f93\u5165"}]})(r.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0"}))))}}]),t}(n.Component),nt=v.a.create()(at),rt=(a(1185),a(337)),ct=[{title:"\u9996\u9875",key:"/home",icon:"home",isPublic:!0},{title:"\u5546\u54c1",key:"/products",icon:"appstore",children:[{title:"\u54c1\u7c7b\u7ba1\u7406",key:"/category",icon:"bars"},{title:"\u5546\u54c1\u7ba1\u7406",key:"/product",icon:"tool"}]},{title:"\u7528\u6237\u7ba1\u7406",key:"/user",icon:"user"},{title:"\u89d2\u8272\u7ba1\u7406",key:"/role",icon:"safety"},{title:"\u56fe\u5f62\u56fe\u8868",key:"/charts",icon:"area-chart",children:[{title:"\u67f1\u5f62\u56fe",key:"/charts/bar",icon:"bar-chart"},{title:"\u6298\u7ebf\u56fe",key:"/charts/line",icon:"line-chart"},{title:"\u997c\u56fe",key:"/charts/pie",icon:"pie-chart"}]},{title:"\u8ba2\u5355\u7ba1\u7406",key:"/order",icon:"windows"}],ot=rt.a.TreeNode,st=v.a.Item,it=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).getMenus=function(){return a.state.checkedKeys},a.onCheck=function(e,t){a.setState({checkedKeys:e})},a.getTreeNodes=function(e){return e.reduce((function(e,t){return e.push(r.a.createElement(ot,{title:t.title,key:t.key},t.children?a.getTreeNodes(t.children):null)),e}),[])};var n=a.props.role.menus;return a.state={checkedKeys:n},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.treeNodes=this.getTreeNodes(ct)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.role.menus;this.setState({checkedKeys:t})}},{key:"render",value:function(){console.log("auth-form render()");var e=this.props.role;return r.a.createElement("div",null,r.a.createElement(st,Object.assign({label:"\u7528\u6237\u540d\u79f0"},{labelCol:{span:4},wrapperCol:{span:15}}),r.a.createElement(g.a,{value:e.name,disabled:!0})),r.a.createElement(rt.a,{defaultExpandAll:!0,checkable:!0,checkedKeys:this.state.checkedKeys,onSelect:this.onSelect,onCheck:this.onCheck},r.a.createElement(ot,{title:"\u5e73\u53f0\u6743\u9650",key:"all"},this.treeNodes)))}}]),t}(n.PureComponent),lt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={roles:[],role:{},modalVisible:0},a.onRow=function(e){return{onClick:function(t){a.setState({role:e})}}},a.getRoleList=Object(j.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:(t=e.sent)&&0===t.status&&(n=t.data,a.setState({roles:n}));case 4:case"end":return e.stop()}}),e)}))),a.setForm=function(e){a.form=e},a.addRole=function(){a.form.validateFields(function(){var e=Object(j.a)(O.a.mark((function e(t,n){var r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=9;break}return r=n.name,e.next=4,B(r);case 4:(c=e.sent)&&0===c.status?(y.a.success("\u6dfb\u52a0\u6210\u529f"),a.setState((function(e){return{roles:[].concat(Object(Te.a)(e.roles),[c.data])}})),a.form.resetFields()):y.a.success("\u6dfb\u52a0\u5931\u8d25"),a.onCancel(),e.next=10;break;case 9:y.a.error("\u9a8c\u8bc1\u5931\u8d25");case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},a.authRole=Object(j.a)(O.a.mark((function e(){var t,n,r,c,o,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.user,n=a.state.role._id,r=a.authForm.current,c=a.state.role,o={menus:r.getMenus(),_id:n,auth_name:t.username,auth_time:Date.now()},Object.assign(c,o),e.next=8,q(c);case 8:(s=e.sent)&&0===s.status?c._id===t.role_id?(y.a.success("\u5f53\u524d\u7528\u6237\u89d2\u8272\u6743\u9650\u6210\u529f,\u8bf7\u91cd\u65b0\u767b\u9646"),a.props.resetUser()):(y.a.success("\u66f4\u65b0\u89d2\u8272\u6743\u9650\u6210\u529f"),a.setState({roles:Object(Te.a)(a.state.roles)}),a.onCancel()):y.a.error("\u66f4\u65b0\u89d2\u8272\u6743\u9650\u5931\u8d25");case 10:case"end":return e.stop()}}),e)}))),a.onCancel=function(){a.form&&a.form.resetFields(),a.setState({modalVisible:0})},a.authForm=r.a.createRef(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getRoleList()}},{key:"UNSAFE_componentWillMount",value:function(){this.columns=[{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",render:et},{title:"\u6388\u6743\u65f6\u95f4",dataIndex:"auth_time",render:et},{title:"\u6388\u6743\u4eba",dataIndex:"auth_name"}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.role,n=t.roles,c=r.a.createElement("div",null,r.a.createElement(h.a,{type:"primary",onClick:function(){e.setState({modalVisible:1})}},"\u521b\u5efa\u89d2\u8272"),r.a.createElement(h.a,{type:"primary",disabled:!a._id,style:{marginLeft:10},onClick:function(){e.setState({modalVisible:2})}},"\u521b\u5efa\u89d2\u8272\u6743\u9650"));return r.a.createElement(ue.a,{title:c},r.a.createElement(me.a,{title:"\u6dfb\u52a0\u89d2\u8272",visible:1===this.state.modalVisible,onOk:this.addRole,onCancel:this.onCancel,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},r.a.createElement(nt,{setForm:this.setForm})),r.a.createElement(me.a,{title:"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650",visible:2===this.state.modalVisible,onOk:this.authRole,onCancel:this.onCancel,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},r.a.createElement(it,{role:a,ref:this.authForm})),r.a.createElement(pe.a,{pagination:{pageSize:Fe},dataSource:n,rowKey:"_id",columns:this.columns,bordered:!0,rowSelection:{type:"radio",selectedRowKeys:[a._id],onSelect:function(t){return e.setState({role:t})}},onRow:this.onRow}))}}]),t}(n.Component),ut=Object(s.b)((function(e){return{user:e.user}}),{resetUser:te})(lt),pt=(a(1194),a(517)),mt=v.a.Item,dt=fe.a.Option,ft=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.setForm(this.props.form)}},{key:"render",value:function(){var e=this.props,t=e.roles,a=e.user,n=this.props.form.getFieldDecorator,c={labelCol:{span:4},wrapperCol:{span:15}};return r.a.createElement(v.a,null,r.a.createElement(mt,Object.assign({label:"\u7528\u6237\u540d:"},c),n("username",{initialValue:a.username,rules:[{required:!0,message:"\u7528\u6237\u540d\u79f0\u5fc5\u987b\u9a76\u5165"},{min:4,message:"\u7528\u6237\u540d\u4e0d\u80fd\u5c0f\u4e8e4\u4f4d\u6570"},{max:12,message:"\u7528\u6237\u540d\u4e0d\u80fd\u5927\u4e8e12\u4f4d\u6570"}]})(r.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u79f0"}))),a._id?null:r.a.createElement(mt,Object.assign({label:"\u5bc6\u7801:"},c),n("password",{initialValue:a.password,rules:[{required:!0,message:"\u5bc6\u7801\u5fc5\u987b\u8f93\u5165"},{min:4,message:"\u7528\u6237\u540d\u4e0d\u80fd\u5c0f\u4e8e4\u4f4d\u6570"},{max:12,message:"\u7528\u6237\u540d\u4e0d\u80fd\u5927\u4e8e12\u4f4d\u6570"}]})(r.a.createElement(g.a,{type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}))),r.a.createElement(mt,Object.assign({label:"\u624b\u673a\u53f7:"},c),n("phone",{initialValue:a.phone})(r.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801"}))),r.a.createElement(mt,Object.assign({label:"\u90ae\u7bb1:"},c),n("email",{initialValue:a.email})(r.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1\u5730\u5740"}))),r.a.createElement(mt,Object.assign({label:"\u89d2\u8272:"},c,{defaultValue:t[0]._id}),n("role_id",{initialValue:a.role_id})(r.a.createElement(fe.a,null,t.map((function(e){return r.a.createElement(dt,{key:e._id,value:e._id},e.name)}))))))}}]),t}(n.Component),ht=v.a.create()(ft),gt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).state={user:{},loading:!0,roles:[],users:[],visible:!1},a.initColumns=function(){a.columns=[{title:"\u7528\u6237\u540d",dataIndex:"username"},{title:"\u90ae\u7bb1",dataIndex:"email"},{title:"\u7535\u8bdd",dataIndex:"phone"},{title:"\u6ce8\u518c\u65f6\u95f4",dataIndex:"create_time",render:et},{title:"\u6240\u5c5e\u89d2\u8272",dataIndex:"role_id",render:function(e){return a.roleNames.get(e)}},{title:"\u64cd\u4f5c",render:function(e){return r.a.createElement("div",null,r.a.createElement(de,{onClick:function(){return a.showModal(e)}},"\u4fee\u6539"),r.a.createElement(pt.a,{title:"\u786e\u8ba4\u5220\u9664\u8fd9\u4e2a\u7528\u6237\u5417?",onConfirm:function(){return a.delUser(e._id)},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},r.a.createElement(de,null,"\u5220\u9664")))}}]},a.initRoleNames=function(e){var t=e.reduce((function(e,t){return e.set(t._id,t.name),e}),new Map);a.roleNames=t},a.getUserList=Object(j.a)(O.a.mark((function e(){var t,n,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:t=e.sent,console.log("getUserList :",t),t&&0===t.status?(n=t.data,r=n.users,c=n.roles,a.initRoleNames(c),a.setState({users:r,roles:c,loading:!1})):y.a.error("\u83b7\u53d6\u7528\u6237\u5217\u8868\u5931\u8d25");case 5:case"end":return e.stop()}}),e)}))),a.showModal=function(e){a.setState({user:e,visible:!0})},a.submint=function(){a.form.validateFields(function(){var e=Object(j.a)(O.a.mark((function e(t,n){var r,c,o,s,i,l,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=13;break}return r=n.username,c=n.password,o=n.phone,s=n.email,i=n.role_id,l={username:r,password:c,phone:o,email:s,role_id:i},a.state.user&&(l._id=a.state.user._id),e.next=6,H(l);case 6:(u=e.sent)&&0===u.status?a.props.user.username===r?(y.a.success("\u66f4\u65b0\u89d2\u8272\u662f\u5f53\u524d\u7528\u6237\u89d2\u8272\uff0c\u8bf7\u91cd\u65b0\u767b\u9646"),a.props.resetUser()):y.a.success("".concat(l._id?"\u66f4\u65b0":"\u6dfb\u52a0","\u6210\u529f")):y.a.error("".concat(l._id?"\u66f4\u65b0":"\u6dfb\u52a0","\u5931\u8d25")),a.getUserList(),a.form.resetFields(),a.setState({visible:!1}),e.next=14;break;case 13:y.a.error("\u9a8c\u8bc1\u5931\u8d25");case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},a.delUser=function(){var e=Object(j.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t);case 2:(n=e.sent)&&0===n.status?(y.a.success("\u5220\u9664\u6210\u529f"),a.setState({loading:!0}),a.getUserList()):y.a.error("\u5220\u9664\u5931\u8d25");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getUserList()}},{key:"UNSAFE_componentWillMount",value:function(){this.initColumns()}},{key:"render",value:function(){var e=this;console.log("user render()");var t=this.state,a=t.loading,n=t.users,c=t.visible,o=t.roles,s=t.user,i=r.a.createElement(h.a,{type:"primary",onClick:this.showModal},"\u521b\u5efa\u7528\u6237");return r.a.createElement(ue.a,{title:i},r.a.createElement(me.a,{title:s._id?"\u4fee\u6539\u7528\u6237":"\u521b\u5efa\u7528\u6237",visible:c,onOk:this.submint,onCancel:function(){e.setState({visible:!1})},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},r.a.createElement(ht,{user:s,roles:o,setForm:function(t){return e.form=t}})),r.a.createElement(pe.a,{loading:a,bordered:!0,rowKey:"_id",columns:this.columns,dataSource:n,pagination:{defaultPageSize:Fe,showQuickJumper:!0}}))}}]),t}(n.Component),bt=Object(s.b)((function(e){return{user:e.user}}),{resetUser:te})(gt),yt=(a(368),a(123)),vt=(a(369),a(68)),Et=(a(1188),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a.clickHandle=function(){a.props.setHeadTitle("\u9996\u9875"),a.props.history.replace("/home")},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(yt.a,{className:"not-found"},r.a.createElement(vt.a,{span:12,className:"left"}),r.a.createElement(vt.a,{span:12,className:"right"},r.a.createElement("h1",null,"404"),r.a.createElement("h2",null,"\u62b1\u6b49,\u4f60\u8bbf\u95ee\u7684\u9875\u9762\u4e0d\u5b58\u5728"),r.a.createElement(h.a,{type:"primary",onClick:this.clickHandle},"\u56de\u5230\u9996\u9875")))}}]),t}(n.Component)),Ot=Object(s.b)(null,{setHeadTitle:Z})(Et),jt=(a(1189),a(147)),kt=(a(1191),jt.a.SubMenu),wt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).state={},a.hasAuth=function(e){var t=a.props.user,n=t.username,r=t.role.menus;return!("admin"!==n&&!e.isPublic&&-1===r.indexOf(e.key))||!!e.children&&!!e.children.find((function(e){return-1!==r.indexOf(e.key)}))},a.getMenuNodes=function(e){var t=a.props.location.pathname;return e.reduce((function(e,n){if(a.hasAuth(n)){var c=n.title,o=n.key,s=n.icon,i=n.children;if(i)i.find((function(e){return-1!==t.indexOf(e.key)}))&&(a.openKey=n.key),e.push(r.a.createElement(kt,{key:o,title:r.a.createElement("span",null,r.a.createElement(b.a,{type:s}),r.a.createElement("span",null,c))},a.getMenuNodes(i)));else t!==n.key&&-1===t.indexOf(n.key)||a.props.setHeadTitle(n.title),e.push(r.a.createElement(jt.a.Item,{key:o},r.a.createElement(d.b,{to:o,onClick:function(){return a.props.setHeadTitle(n.title)}},r.a.createElement(b.a,{type:s}),r.a.createElement("span",null,c))))}return e}),[])},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.menuNodes=this.getMenuNodes(ct)}},{key:"render",value:function(){var e=this.props.location.pathname,t=this.openKey;return 0===e.indexOf("/product")&&(e="/product"),r.a.createElement("div",{className:"left-nav"},r.a.createElement(d.b,{to:"/",className:"left-nav-header"},r.a.createElement("img",{src:ne.a,alt:"logo"}),r.a.createElement("h1",null,"React \u540e\u53f0")),r.a.createElement(jt.a,{theme:"dark",mode:"inline",selectedKeys:[e],defaultOpenKeys:[t]},this.menuNodes))}}]),t}(n.Component),xt=Object(s.b)((function(e){return{user:e.user}}),{setHeadTitle:Z})(Object(f.g)(wt)),Ct=(a(1192),me.a.confirm),St=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={dayPictureUrl:"",weather:"",currentDate:""},a.recursiveQueryTitle=function(e,t){var n=!0,r=!1,c=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var i=o.value;if(0===t.indexOf(i.key))return i;if(i.children){var l=a.recursiveQueryTitle(i.children,t);if(l)return l}}}catch(u){r=!0,c=u}finally{try{n||null==s.return||s.return()}finally{if(r)throw c}}},a.getTitle=function(){var e=a.props.location.pathname,t=a.recursiveQueryTitle(ct,e);return t?t.title:""},a.loginOut=function(){Ct({title:"\u662f\u5426\u9000\u51fa\u767b\u9646?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a.props.resetUser()}})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(j.a)(O.a.mark((function e(){var t,a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("\u676d\u5dde");case 2:t=e.sent,a=t.dayPictureUrl,n=t.weather,this.getTime(),this.setState({dayPictureUrl:a,weather:n});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.dateTimer)}},{key:"getTime",value:function(){var e=this;this.dateTimer=setInterval((function(){var t=et(new Date);e.setState({currentDate:t})}),1e3)}},{key:"render",value:function(){console.log("header render()");var e=this.state,t=e.currentDate,a=e.dayPictureUrl,n=e.weather,c=this.props,o=c.user,s=c.headTitle;return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header-top"},r.a.createElement("span",null,"\u6b22\u8fce,",o.username),r.a.createElement(de,{onClick:this.loginOut},"\u9000\u51fa")),r.a.createElement("div",{className:"header-bottom"},r.a.createElement("div",{className:"header-bottom-left"},s),r.a.createElement("div",{className:"header-bottom-right"},r.a.createElement("span",null,t),r.a.createElement("img",{src:a,alt:"aa"}),r.a.createElement("span",null,n))))}}]),t}(n.Component),Nt=Object(f.g)(St),_t=Object(s.b)((function(e){return{headTitle:e.headTitle,user:e.user}}),{resetUser:te})(Nt),Tt=ie.a.Footer,Pt=ie.a.Sider,It=ie.a.Content,Ft=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.props.user._id?r.a.createElement(ie.a,{className:"admin"},r.a.createElement(Pt,null,r.a.createElement(xt,null)),r.a.createElement(ie.a,null,r.a.createElement(_t,null),r.a.createElement(It,{style:{backgroundColor:"#fff",margin:20}},r.a.createElement(f.d,null,r.a.createElement(f.a,{from:"/",exact:!0,to:"/home"}),r.a.createElement(f.b,{path:"/home",component:le}),r.a.createElement(f.b,{path:"/category",component:je}),r.a.createElement(f.b,{path:"/product",component:Ze}),r.a.createElement(f.b,{path:"/user",component:bt}),r.a.createElement(f.b,{path:"/role",component:ut}),r.a.createElement(f.b,{path:"/charts/bar",component:xe}),r.a.createElement(f.b,{path:"/charts/pie",component:Se}),r.a.createElement(f.b,{path:"/charts/line",component:Ce}),r.a.createElement(f.b,{path:"/order",component:Ne}),r.a.createElement(f.b,{component:Ot}))),r.a.createElement(Tt,{style:{textAlign:"center",color:"#cccc"}},"\u63a8\u8350\u4f7f\u7528\u8c37\u6b4c\u6d4f\u89c8\u5668,\u83b7\u5f97\u66f4\u597d\u7684\u4f7f\u7528\u4f53\u9a8c"))):r.a.createElement(f.a,{to:"/login"})}}]),t}(n.Component),Mt=Object(s.b)((function(e){return{user:e.user}}))(Ft),At=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/login",component:se}),r.a.createElement(f.b,{path:"/",component:Mt})))}}]),t}(n.Component),Ut=a(118),Dt=a(518),Vt=a(519);function Lt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Rt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Lt(a,!0).forEach((function(t){Object(k.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Lt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Wt=X(),Kt=Object(Ut.combineReducers)({headTitle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"set_head_title":return t.headTitle;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"reciver_user":return t.user;case"show_msg":var a=t.errorMessage;return Rt({},e,{errorMessage:a});case"reset_user":return{};default:return e}}}),Bt=Object(Ut.createStore)(Kt,Object(Vt.composeWithDevTools)(Object(Ut.applyMiddleware)(Dt.a)));o.a.render(r.a.createElement(s.a,{store:Bt},r.a.createElement(At,null)),document.getElementById("root"))},244:function(e,t,a){e.exports=a.p+"static/media/logo.ba1f87ec.png"},523:function(e,t,a){e.exports=a(1193)},608:function(e,t,a){},687:function(e,t,a){},688:function(e,t,a){},700:function(e,t,a){},701:function(e,t,a){}},[[523,1,2]]]);
//# sourceMappingURL=main.3a4043c3.chunk.js.map